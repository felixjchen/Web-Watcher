{"version":3,"sources":["components/threetree_90.png","components/login.js","components/page.js","index.js"],"names":["module","exports","__webpack_require__","p","Login","props","react_default","a","createElement","id","Header","aria-label","HeaderName","href","prefix","Grid","Row","Column","sm","span","offset","md","lg","className","TextInput","labelText","PasswordInput","Button","size","kind","onClick","signupHandler","loginHandler","src","fractel","alt","action","console","log","headers","key","header","Page","HeaderContainer","render","Fragment","HeaderGlobalBar","HeaderGlobalAction","logoutHandler","bucket_10","DataTable","rows","watchers","_ref","getHeaderProps","getRowProps","getTableProps","getToolbarProps","onInputChange","getTableContainerProps","TableContainer","TableToolbar","Object","assign","TableToolbarContent","TableToolbarSearch","onChange","Table","TableHead","TableRow","map","TableHeader","TableBody","row","cells","value","OverflowMenu","flipped","OverflowMenuItem","itemText","hasDivider","isDelete","cell","TableCell","gatewayAddress","silentRefreshTimeout","login","_ref2","asyncToGenerator","regenerator_default","mark","_callee","email","password","options","response","responseText","_JSON$parse","success","accessTokenExpiry","wrap","_context","prev","next","document","getElementById","Loading","method","credentials","body","JSON","stringify","Content-Type","redirect","fetch","concat","sent","text","parse","alert","components_login","signup","getProfile","setTimeout","silentRefresh","stop","_x","apply","this","arguments","logout","_ref3","_callee2","requestOptions","_context2","clearTimeout","abrupt","_ref4","_callee3","_context3","_ref5","_callee4","_JSON$parse2","_context4","forEach","i","date","Date","setUTCSeconds","last_run","String","components_page","_ref6","_callee5","_JSON$parse3","_context5","initialSilentRefresh","_ref7","_callee6","_context6","t0"],"mappings":"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","file":"static/js/main.e11cb2a5.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/threetree_90.8428407b.png\";","import React from \"react\";\nimport {\n  Header,\n  HeaderName,\n  Grid,\n  Row,\n  Column,\n  Button,\n  TextInput,\n} from \"carbon-components-react\";\nimport \"./login.css\";\nimport fractel from \"./threetree_90.png\";\n\nconst Login = (props) => (\n  <div id=\"login\">\n    <Header aria-label=\"header\">\n      <HeaderName href=\"#\" prefix=\"Web\">\n        Watcher\n      </HeaderName>\n    </Header>\n    <Grid>\n      <Row>\n        <Column\n          id=\"leftBox\"\n          sm={{ span: 4, offset: 0 }}\n          md={{ span: 4, offset: 1 }}\n          lg={{ span: 4, offset: 2 }}\n        >\n          <h1 className=\"bx--type-semibold\">Sign in to your account</h1>\n          <TextInput id=\"email\" labelText=\"Email\" />\n          <TextInput.PasswordInput id=\"password\" labelText=\"Password\" />\n          <Button size=\"small\" kind=\"secondary\" onClick={props.signupHandler}>\n            Sign up\n          </Button>\n          <Button size=\"small\" onClick={props.loginHandler}>\n            Log in\n          </Button>\n        </Column>\n        <Column\n          id=\"rightBox\"\n          sm={{ span: 0 }}\n          md={{ span: 2 }}\n          lg={{ span: 4 }}\n        >\n          <img src={fractel} alt=\"fractel\"></img>\n        </Column>\n      </Row>\n    </Grid>\n  </div>\n);\n\nexport default Login;\n","import React from \"react\";\nimport {\n  Header,\n  HeaderName,\n  HeaderContainer,\n  HeaderGlobalBar,\n  HeaderGlobalAction,\n  TableContainer,\n  Table,\n  TableHead,\n  TableRow,\n  TableHeader,\n  TableBody,\n  TableCell,\n  TableToolbar,\n  TableToolbarContent,\n  TableToolbarSearch,\n  DataTable,\n  Button,\n  OverflowMenu,\n  OverflowMenuItem,\n  ModalWrapper,\n  TextInput,\n  Select,\n  SelectItem,\n} from \"carbon-components-react\";\nimport { Logout20 } from \"@carbon/icons-react\";\nimport \"./page.css\";\n\nlet action = () => {\n  console.log(\"Add WATCHER\");\n};\n\nconst headers = [\n  {\n    key: \"url\",\n    header: \"URL\",\n  },\n  {\n    key: \"frequency\",\n    header: \"Frequency\",\n  },\n  {\n    key: \"last_run\",\n    header: \"Last Run\",\n  },\n  {\n    key: \"options\",\n    header: \"\",\n  },\n];\n\nconst Page = (props) => {\n  return (\n    <div id=\"page\">\n      <HeaderContainer\n        render={() => (\n          <>\n            <Header aria-label=\"IBM Platform Name\">\n              <HeaderName prefix=\"Web\">Watcher</HeaderName>\n              <HeaderGlobalBar>\n                <HeaderGlobalAction\n                  aria-label=\"Logout\"\n                  onClick={props.logoutHandler}\n                >\n                  <Logout20 />\n                </HeaderGlobalAction>\n              </HeaderGlobalBar>\n            </Header>\n          </>\n        )}\n      />\n\n      <DataTable rows={props.watchers} headers={headers}>\n        {({\n          rows,\n          headers,\n          getHeaderProps,\n          getRowProps,\n          getTableProps,\n          getToolbarProps,\n          onInputChange,\n          getTableContainerProps,\n        }) => (\n          <TableContainer\n            // title={`Hello ${props.email}`}\n            // description={`Welcome ${props.email}`}\n            {...getTableContainerProps()}\n          >\n            <TableToolbar\n              {...getToolbarProps()}\n              aria-label=\"data table toolbar\"\n            >\n              <TableToolbarContent>\n                <TableToolbarSearch onChange={onInputChange} />\n                <Button onClick={action}>Add Watcher</Button>\n              </TableToolbarContent>\n            </TableToolbar>\n            <Table {...getTableProps()}>\n              <TableHead>\n                <TableRow>\n                  {headers.map((header) => (\n                    <TableHeader\n                      key={header.key}\n                      {...getHeaderProps({ header })}\n                    >\n                      {header.header}\n                    </TableHeader>\n                  ))}\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {rows.map((row) => {\n                  row.cells[3].value = (\n                    <OverflowMenu flipped={true}>\n                      <OverflowMenuItem itemText=\"Edit\" />\n                      <OverflowMenuItem itemText=\"Delete\" hasDivider isDelete />\n                    </OverflowMenu>\n                  );\n                  return (\n                    <TableRow key={row.id} {...getRowProps({ row })}>\n                      {row.cells.map((cell) => (\n                        <TableCell key={cell.id}>{cell.value}</TableCell>\n                      ))}\n                    </TableRow>\n                  );\n                })}\n              </TableBody>\n            </Table>\n          </TableContainer>\n        )}\n      </DataTable>\n\n      {/* <ModalWrapper\n        id=\"input-modal\"\n        handleSubmit={() => {\n          action(\"onSubmit\")();\n          return true;\n        }}\n        buttonTriggerText=\"Add Watcher\"\n      >\n        <TextInput\n          id=\"test2\"\n          placeholder=\"Hint text here\"\n          labelText=\"Text Input:\"\n        />\n        <br />\n        <Select id=\"select-1\" labelText=\"Select\">\n          <SelectItem\n            disabled\n            hidden\n            value=\"placeholder-item\"\n            text=\"Pick an option\"\n          />\n          <SelectItem value=\"option-1\" text=\"Option 1\" />\n          <SelectItem value=\"option-2\" text=\"Option 2\" />\n          <SelectItem value=\"option-3\" text=\"Option 3\" />\n        </Select>\n        <br />\n      </ModalWrapper> */}\n    </div>\n  );\n};\n\nexport default Page;\n","import React from \"react\";\nimport { Loading } from \"carbon-components-react\";\nimport { render } from \"react-dom\";\n\nimport Login from \"./components/login\";\nimport Page from \"./components/page\";\n\nconst gatewayAddress =\n  \"https://bwaexdxnvc.execute-api.us-east-2.amazonaws.com/prod\";\nlet silentRefreshTimeout = null;\n\nlet login = async ({ email, password }) => {\n  if (email == null) {\n    email = document.getElementById(\"email\").value;\n  }\n  if (password == null) {\n    password = document.getElementById(\"password\").value;\n  }\n\n  render(<Loading />, document.getElementById(\"root\"));\n\n  let options = {\n    method: \"POST\",\n    credentials: \"include\",\n    body: JSON.stringify({ email, password }),\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    redirect: \"follow\",\n  };\n\n  let response = await fetch(`${gatewayAddress}/login`, options);\n  let responseText = await response.text();\n  let { success, accessTokenExpiry } = JSON.parse(responseText);\n\n  console.log(responseText);\n  if (!success) {\n    alert(\"Login failed: username/password error\");\n    render(\n      <Login signupHandler={signup} loginHandler={login} />,\n      document.getElementById(\"root\")\n    );\n  } else {\n    await getProfile();\n    silentRefreshTimeout = setTimeout(\n      silentRefresh,\n      (accessTokenExpiry - 2) * 1000\n    );\n  }\n};\n\nlet logout = async () => {\n  var requestOptions = {\n    method: \"POST\",\n    credentials: \"include\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    redirect: \"follow\",\n  };\n\n  let response = await fetch(`${gatewayAddress}/logout`, requestOptions);\n  let responseText = await response.text();\n  render(\n    <Login signupHandler={signup} loginHandler={login} />,\n    document.getElementById(\"root\")\n  );\n\n  // Stop silent refresh\n  clearTimeout(silentRefreshTimeout);\n\n  return JSON.parse(responseText).success;\n};\n\nlet signup = async () => {\n  let email = document.getElementById(\"email\").value;\n  let password = document.getElementById(\"password\").value;\n\n  render(<Loading />, document.getElementById(\"root\"));\n\n  let options = {\n    method: \"POST\",\n    credentials: \"include\",\n    body: JSON.stringify({ email, password }),\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    redirect: \"follow\",\n  };\n\n  let response = await fetch(`${gatewayAddress}/user`, options);\n  let responseText = await response.text();\n  console.log(responseText);\n\n  login({ email, password });\n};\n\nlet getProfile = async () => {\n  var requestOptions = {\n    credentials: \"include\",\n  };\n\n  let response = await fetch(`${gatewayAddress}/user`, requestOptions);\n  let responseText = await response.text();\n\n  let { email, watchers } = JSON.parse(responseText);\n  // Cleanup Date\n  watchers.forEach((i) => {\n    let date = new Date(0);\n    date.setUTCSeconds(i.last_run);\n    i.last_run = String(date);\n  });\n\n  render(\n    <Page logoutHandler={logout} email={email} watchers={watchers} />,\n    document.getElementById(\"root\")\n  );\n};\n\nlet silentRefresh = async () => {\n  let requestOptions = {\n    method: \"POST\",\n    credentials: \"include\",\n  };\n\n  let response = await fetch(`${gatewayAddress}/refresh`, requestOptions);\n  let responseText = await response.text();\n  let { success, accessTokenExpiry } = JSON.parse(responseText);\n\n  // If something is wrong with refresh token.. we logout\n  if (!success) {\n    await logout();\n  } else {\n    // Start silent refresh a couple seconds early... so we always have an access token\n    silentRefreshTimeout = setTimeout(\n      silentRefresh,\n      (accessTokenExpiry - 2) * 1000\n    );\n    await getProfile();\n  }\n\n  return success;\n};\n\nlet initialSilentRefresh = async () => {\n  try {\n    let success = await silentRefresh();\n\n    // if (success) {\n    //   await getProfile();\n    // }\n  } catch (err) {\n    console.log(\"Initial silent refresh fail \" + err);\n  }\n};\n\nrender(<Loading />, document.getElementById(\"root\"));\ninitialSilentRefresh();\n"],"sourceRoot":""}