{"version":3,"sources":["components/threetree_90.png","components/login.js","components/page.js","index.js"],"names":["module","exports","__webpack_require__","p","Login","props","react_default","a","createElement","id","Header","aria-label","HeaderName","href","prefix","Grid","Row","Column","sm","span","offset","md","lg","className","TextInput","labelText","PasswordInput","Button","size","kind","onClick","signupHandler","loginHandler","src","fractel","alt","rows","name","protocol","port","rule","attached_groups","status","enabled","headers","key","header","Page","HeaderContainer","render","_ref","isSideNavExpanded","onClickSideNavExpand","Fragment","HeaderGlobalBar","HeaderGlobalAction","logoutHandler","bucket_10","DataTable","_ref2","t","getHeaderProps","getRowProps","getTableProps","getToolbarProps","onInputChange","getTableContainerProps","TableContainer","Object","assign","title","description","TableToolbar","TableToolbarContent","TableToolbarSearch","onChange","console","log","Table","TableHead","TableRow","map","TableHeader","TableBody","row","cells","cell","TableCell","value","gatewayAddress","silentRefreshTimeout","login","asyncToGenerator","regenerator_default","mark","_callee","email","password","options","response","responseText","_JSON$parse","success","accessTokenExpiry","wrap","_context","prev","next","document","getElementById","Loading","method","credentials","body","JSON","stringify","Content-Type","redirect","fetch","concat","sent","text","parse","alert","components_login","signup","getProfile","setTimeout","silentRefresh","stop","_x","apply","this","arguments","logout","_ref3","_callee2","requestOptions","_context2","clearTimeout","abrupt","_ref4","_callee3","_context3","_ref5","_callee4","_context4","components_page","_ref6","_callee5","_JSON$parse2","_context5","initialSilentRefresh","_ref7","_callee6","_context6","t0"],"mappings":"4EAAAA,EAAAC,QAAiBC,EAAAC,EAAuB,4SCmDzBC,EAtCD,SAACC,GAAD,OACZC,EAAAC,EAAAC,cAAA,OAAKC,GAAG,SACNH,EAAAC,EAAAC,cAACE,EAAA,EAAD,CAAQC,aAAW,UACjBL,EAAAC,EAAAC,cAACI,EAAA,EAAD,CAAYC,KAAK,IAAIC,OAAO,OAA5B,YAIFR,EAAAC,EAAAC,cAACO,EAAA,EAAD,KACET,EAAAC,EAAAC,cAACQ,EAAA,EAAD,KACEV,EAAAC,EAAAC,cAACS,EAAA,EAAD,CACER,GAAG,UACHS,GAAI,CAAEC,KAAM,EAAGC,OAAQ,GACvBC,GAAI,CAAEF,KAAM,EAAGC,OAAQ,GACvBE,GAAI,CAAEH,KAAM,EAAGC,OAAQ,IAEvBd,EAAAC,EAAAC,cAAA,MAAIe,UAAU,qBAAd,2BACAjB,EAAAC,EAAAC,cAACgB,EAAA,EAAD,CAAWf,GAAG,QAAQgB,UAAU,UAChCnB,EAAAC,EAAAC,cAACgB,EAAA,EAAUE,cAAX,CAAyBjB,GAAG,WAAWgB,UAAU,aACjDnB,EAAAC,EAAAC,cAACmB,EAAA,EAAD,CAAQC,KAAK,QAAQC,KAAK,YAAYC,QAASzB,EAAM0B,eAArD,WAGAzB,EAAAC,EAAAC,cAACmB,EAAA,EAAD,CAAQC,KAAK,QAAQE,QAASzB,EAAM2B,cAApC,WAIF1B,EAAAC,EAAAC,cAACS,EAAA,EAAD,CACER,GAAG,WACHS,GAAI,CAAEC,KAAM,GACZE,GAAI,CAAEF,KAAM,GACZG,GAAI,CAAEH,KAAM,IAEZb,EAAAC,EAAAC,cAAA,OAAKyB,IAAKC,IAASC,IAAI,yIChB3BC,SAAO,CACX,CACE3B,GAAI,IACJ4B,KAAM,kBACNC,SAAU,OACVC,KAAM,IACNC,KAAM,cACNC,gBAAiB,yBACjBC,OAAQ,WACRC,SAAS,GAEX,CACElC,GAAI,IACJ4B,KAAM,kBACNC,SAAU,OACVC,KAAM,IACNC,KAAM,cACNC,gBAAiB,2BACjBC,OAAQ,WACRC,SAAS,GAEX,CACElC,GAAI,IACJ4B,KAAM,kBACNC,SAAU,OACVC,KAAM,GACNC,KAAM,iBACNC,gBAAiB,0BACjBC,OAAQ,SACRC,SAAS,KAIPC,EAAU,CACd,CACEC,IAAK,OACLC,OAAQ,QAEV,CACED,IAAK,WACLC,OAAQ,YAEV,CACED,IAAK,OACLC,OAAQ,QAEV,CACED,IAAK,OACLC,OAAQ,QAEV,CACED,IAAK,kBACLC,OAAQ,mBAEV,CACED,IAAK,SACLC,OAAQ,UAEV,CACED,IAAK,UACLC,OAAQ,YAyEGC,EArEF,SAAC1C,GAAD,OACXC,EAAAC,EAAAC,cAAA,OAAKC,GAAG,QACNH,EAAAC,EAAAC,cAACwC,EAAA,EAAD,CACEC,OAAQ,SAAAC,GAAA,OAAAA,EAAGC,kBAAHD,EAAsBE,qBAC5B9C,EAAAC,EAAAC,cAAAF,EAAAC,EAAA8C,SAAA,KACE/C,EAAAC,EAAAC,cAACE,EAAA,EAAD,CAAQC,aAAW,qBACjBL,EAAAC,EAAAC,cAACI,EAAA,EAAD,CAAYE,OAAO,OAAnB,WAEAR,EAAAC,EAAAC,cAAC8C,EAAA,EAAD,KACEhD,EAAAC,EAAAC,cAAC+C,EAAA,EAAD,CACE5C,aAAW,SACXmB,QAASzB,EAAMmD,eAEflD,EAAAC,EAAAC,cAACiD,EAAA,EAAD,aAQZnD,EAAAC,EAAAC,cAACkD,EAAA,EAAD,CAAWtB,KAAMA,EAAMQ,QAASA,GAC7B,SAAAe,GAAA,IAzFOC,EA0FNxB,EADDuB,EACCvB,KACAQ,EAFDe,EAECf,QACAiB,EAHDF,EAGCE,eACAC,EAJDH,EAICG,YACAC,EALDJ,EAKCI,cACAC,EANDL,EAMCK,gBACAC,EAPDN,EAOCM,cACAC,EARDP,EAQCO,uBARD,OAUC5D,EAAAC,EAAAC,cAAC2D,EAAA,EAADC,OAAAC,OAAA,CACEC,MAAM,WACNC,YAAY,gBACRL,KAEJ5D,EAAAC,EAAAC,cAACgE,EAAA,EAADJ,OAAAC,OAAA,GAAkBL,IAAlB,CAAqCrD,aAAW,uBAC9CL,EAAAC,EAAAC,cAACiE,EAAA,EAAD,KACEnE,EAAAC,EAAAC,cAACkE,EAAA,EAAD,CAAoBC,SAAUV,IAC9B3D,EAAAC,EAAAC,cAACmB,EAAA,EAAD,CAAQG,SA3GR8B,EA2GwB,oBA1GpCgB,QAAQC,IAAIjB,KA0GA,iBAGJtD,EAAAC,EAAAC,cAACsE,EAAA,EAAUf,IACTzD,EAAAC,EAAAC,cAACuE,EAAA,EAAD,KACEzE,EAAAC,EAAAC,cAACwE,EAAA,EAAD,KACGpC,EAAQqC,IAAI,SAACnC,GAAD,OACXxC,EAAAC,EAAAC,cAAC0E,EAAA,EAADd,OAAAC,OAAA,CAAaxB,IAAKC,EAAOD,KAASgB,EAAe,CAAEf,YAChDA,EAAOA,YAKhBxC,EAAAC,EAAAC,cAAC2E,EAAA,EAAD,KACG/C,EAAK6C,IAAI,SAACG,GAAD,OACR9E,EAAAC,EAAAC,cAACwE,EAAA,EAADZ,OAAAC,OAAA,CAAUxB,IAAKuC,EAAI3E,IAAQqD,EAAY,CAAEsB,SACtCA,EAAIC,MAAMJ,IAAI,SAACK,GAAD,OACbhF,EAAAC,EAAAC,cAAC+E,EAAA,EAAD,CAAW1C,IAAKyC,EAAK7E,IAAK6E,EAAKE,mBC9I7CC,EACJ,8DACEC,EAAuB,KAEvBC,EAAK,eAAAhC,EAAAS,OAAAwB,EAAA,EAAAxB,CAAAyB,EAAAtF,EAAAuF,KAAG,SAAAC,EAAA7C,GAAA,IAAA8C,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAV,EAAAtF,EAAAiG,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAASX,EAAT9C,EAAS8C,MAAOC,EAAhB/C,EAAgB+C,SACb,MAATD,IACFA,EAAQY,SAASC,eAAe,SAASrB,OAE3B,MAAZS,IACFA,EAAWW,SAASC,eAAe,YAAYrB,OAGjDvC,iBAAO3C,EAAAC,EAAAC,cAACsG,EAAA,EAAD,MAAaF,SAASC,eAAe,SAExCX,EAAU,CACZa,OAAQ,OACRC,YAAa,UACbC,KAAMC,KAAKC,UAAU,CAAEnB,QAAOC,aAC9BrD,QAAS,CACPwE,eAAgB,oBAElBC,SAAU,UAjBFZ,EAAAE,KAAA,EAoBWW,MAAK,GAAAC,OAAI9B,EAAJ,UAA4BS,GApB5C,cAoBNC,EApBMM,EAAAe,KAAAf,EAAAE,KAAA,GAqBeR,EAASsB,OArBxB,WAqBNrB,EArBMK,EAAAe,KAAAnB,EAsB2Ba,KAAKQ,MAAMtB,GAA1CE,EAtBID,EAsBJC,QAASC,EAtBLF,EAsBKE,kBAEf3B,QAAQC,IAAIuB,GACPE,EAzBK,CAAAG,EAAAE,KAAA,SA0BRgB,MAAM,aACN1E,iBACE3C,EAAAC,EAAAC,cAACoH,EAAD,CAAO7F,cAAe8F,EAAQ7F,aAAc2D,IAC5CiB,SAASC,eAAe,SA7BlBJ,EAAAE,KAAA,wBAAAF,EAAAE,KAAA,GAgCFmB,IAhCE,QAiCRpC,EAAuBqC,WACrBC,EAC0B,KAAzBzB,EAAoB,IAnCf,yBAAAE,EAAAwB,SAAAlC,MAAH,gBAAAmC,GAAA,OAAAvE,EAAAwE,MAAAC,KAAAC,YAAA,GAwCLC,EAAM,eAAAC,EAAAnE,OAAAwB,EAAA,EAAAxB,CAAAyB,EAAAtF,EAAAuF,KAAG,SAAA0C,IAAA,IAAAC,EAAAtC,EAAAC,EAAA,OAAAP,EAAAtF,EAAAiG,KAAA,SAAAkC,GAAA,cAAAA,EAAAhC,KAAAgC,EAAA/B,MAAA,cACP8B,EAAiB,CACnB1B,OAAQ,OACRC,YAAa,UACbpE,QAAS,CACPwE,eAAgB,oBAElBC,SAAU,UAPDqB,EAAA/B,KAAA,EAUUW,MAAK,GAAAC,OAAI9B,EAAJ,WAA6BgD,GAV5C,cAUPtC,EAVOuC,EAAAlB,KAAAkB,EAAA/B,KAAA,EAWcR,EAASsB,OAXvB,cAWPrB,EAXOsC,EAAAlB,KAYXvE,iBACE3C,EAAAC,EAAAC,cAACoH,EAAD,CAAO7F,cAAe8F,EAAQ7F,aAAc2D,IAC5CiB,SAASC,eAAe,SAI1B8B,aAAajD,GAlBFgD,EAAAE,OAAA,SAoBJ1B,KAAKQ,MAAMtB,GAAcE,SApBrB,yBAAAoC,EAAAT,SAAAO,MAAH,yBAAAD,EAAAJ,MAAAC,KAAAC,YAAA,GAuBNR,EAAM,eAAAgB,EAAAzE,OAAAwB,EAAA,EAAAxB,CAAAyB,EAAAtF,EAAAuF,KAAG,SAAAgD,IAAA,IAAA9C,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAP,EAAAtF,EAAAiG,KAAA,SAAAuC,GAAA,cAAAA,EAAArC,KAAAqC,EAAApC,MAAA,cACPX,EAAQY,SAASC,eAAe,SAASrB,MACzCS,EAAWW,SAASC,eAAe,YAAYrB,MAEnDvC,iBAAO3C,EAAAC,EAAAC,cAACsG,EAAA,EAAD,MAAaF,SAASC,eAAe,SAExCX,EAAU,CACZa,OAAQ,OACRC,YAAa,UACbC,KAAMC,KAAKC,UAAU,CAAEnB,QAAOC,aAC9BrD,QAAS,CACPwE,eAAgB,oBAElBC,SAAU,UAbD0B,EAAApC,KAAA,EAgBUW,MAAK,GAAAC,OAAI9B,EAAJ,SAA2BS,GAhB1C,cAgBPC,EAhBO4C,EAAAvB,KAAAuB,EAAApC,KAAA,EAiBcR,EAASsB,OAjBvB,OAiBPrB,EAjBO2C,EAAAvB,KAkBX5C,QAAQC,IAAIuB,GAEZT,EAAM,CAAEK,QAAOC,aApBJ,yBAAA8C,EAAAd,SAAAa,MAAH,yBAAAD,EAAAV,MAAAC,KAAAC,YAAA,GAuBNP,EAAU,eAAAkB,EAAA5E,OAAAwB,EAAA,EAAAxB,CAAAyB,EAAAtF,EAAAuF,KAAG,SAAAmD,IAAA,IAAAR,EAAAtC,EAAAC,EAAA,OAAAP,EAAAtF,EAAAiG,KAAA,SAAA0C,GAAA,cAAAA,EAAAxC,KAAAwC,EAAAvC,MAAA,cACX8B,EAAiB,CACnBzB,YAAa,WAFAkC,EAAAvC,KAAA,EAKMW,MAAK,GAAAC,OAAI9B,EAAJ,SAA2BgD,GALtC,cAKXtC,EALW+C,EAAA1B,KAAA0B,EAAAvC,KAAA,EAMUR,EAASsB,OANnB,OAMXrB,EANW8C,EAAA1B,KAOf5C,QAAQC,IAAIqC,KAAKQ,MAAMtB,IACvBnD,iBAAO3C,EAAAC,EAAAC,cAAC2I,EAAD,CAAM3F,cAAe8E,IAAY1B,SAASC,eAAe,SARjD,wBAAAqC,EAAAjB,SAAAgB,MAAH,yBAAAD,EAAAb,MAAAC,KAAAC,YAAA,GAWVL,EAAa,eAAAoB,EAAAhF,OAAAwB,EAAA,EAAAxB,CAAAyB,EAAAtF,EAAAuF,KAAG,SAAAuD,IAAA,IAAAZ,EAAAtC,EAAAC,EAAAkD,EAAAhD,EAAAC,EAAA,OAAAV,EAAAtF,EAAAiG,KAAA,SAAA+C,GAAA,cAAAA,EAAA7C,KAAA6C,EAAA5C,MAAA,cACd8B,EAAiB,CACnB1B,OAAQ,OACRC,YAAa,WAHGuC,EAAA5C,KAAA,EAMGW,MAAK,GAAAC,OAAI9B,EAAJ,YAA8BgD,GANtC,cAMdtC,EANcoD,EAAA/B,KAAA+B,EAAA5C,KAAA,EAOOR,EAASsB,OAPhB,UAOdrB,EAPcmD,EAAA/B,KAAA8B,EAQmBpC,KAAKQ,MAAMtB,GAA1CE,EARYgD,EAQZhD,QAASC,EARG+C,EAQH/C,kBAGVD,EAXa,CAAAiD,EAAA5C,KAAA,gBAAA4C,EAAA5C,KAAA,GAYV2B,IAZU,QAAAiB,EAAA5C,KAAA,iBAehBjB,EAAuBqC,WACrBC,EAC0B,KAAzBzB,EAAoB,IAjBP,eAAAgD,EAAAX,OAAA,SAqBXtC,GArBW,yBAAAiD,EAAAtB,SAAAoB,MAAH,yBAAAD,EAAAjB,MAAAC,KAAAC,YAAA,GAwBbmB,EAAoB,eAAAC,EAAArF,OAAAwB,EAAA,EAAAxB,CAAAyB,EAAAtF,EAAAuF,KAAG,SAAA4D,IAAA,OAAA7D,EAAAtF,EAAAiG,KAAA,SAAAmD,GAAA,cAAAA,EAAAjD,KAAAiD,EAAAhD,MAAA,cAAAgD,EAAAjD,KAAA,EAAAiD,EAAAhD,KAAA,EAEHqB,IAFG,WAAA2B,EAAAnC,KAAA,CAAAmC,EAAAhD,KAAA,eAAAgD,EAAAhD,KAAA,EAKfmB,IALe,OAAA6B,EAAAhD,KAAA,gBAAAgD,EAAAjD,KAAA,EAAAiD,EAAAC,GAAAD,EAAA,SAQvB/E,QAAQC,IAAI,+BAAA8E,EAAAC,IARW,yBAAAD,EAAA1B,SAAAyB,EAAA,iBAAH,yBAAAD,EAAAtB,MAAAC,KAAAC,YAAA,GAYxBpF,iBAAO3C,EAAAC,EAAAC,cAACsG,EAAA,EAAD,MAAaF,SAASC,eAAe,SAC5C2C","file":"static/js/main.86c7bbbb.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/threetree_90.8428407b.png\";","import React from \"react\";\nimport {\n  Header,\n  HeaderName,\n  Grid,\n  Row,\n  Column,\n  Button,\n  TextInput,\n} from \"carbon-components-react\";\nimport \"./login.css\";\nimport fractel from \"./threetree_90.png\";\n\nconst Login = (props) => (\n  <div id=\"login\">\n    <Header aria-label=\"header\">\n      <HeaderName href=\"#\" prefix=\"Web\">\n        Watcher\n      </HeaderName>\n    </Header>\n    <Grid>\n      <Row>\n        <Column\n          id=\"leftBox\"\n          sm={{ span: 4, offset: 0 }}\n          md={{ span: 4, offset: 1 }}\n          lg={{ span: 4, offset: 2 }}\n        >\n          <h1 className=\"bx--type-semibold\">Sign in to your account</h1>\n          <TextInput id=\"email\" labelText=\"Email\" />\n          <TextInput.PasswordInput id=\"password\" labelText=\"Password\" />\n          <Button size=\"small\" kind=\"secondary\" onClick={props.signupHandler}>\n            Sign up\n          </Button>\n          <Button size=\"small\" onClick={props.loginHandler}>\n            Log in\n          </Button>\n        </Column>\n        <Column\n          id=\"rightBox\"\n          sm={{ span: 0 }}\n          md={{ span: 2 }}\n          lg={{ span: 4 }}\n        >\n          <img src={fractel} alt=\"fractel\"></img>\n        </Column>\n      </Row>\n    </Grid>\n  </div>\n);\n\nexport default Login;\n","import React from \"react\";\nimport {\n  Header,\n  HeaderName,\n  HeaderContainer,\n  HeaderGlobalBar,\n  HeaderGlobalAction,\n  TableContainer,\n  Table,\n  TableHead,\n  TableRow,\n  TableHeader,\n  TableBody,\n  TableCell,\n  TableToolbar,\n  TableToolbarContent,\n  TableToolbarSearch,\n  DataTable,\n  Button,\n  OverflowMenu,\n  OverflowMenuItem,\n} from \"carbon-components-react\";\nimport { Logout20 } from \"@carbon/icons-react\";\nimport \"./page.css\";\n\nlet action = (t) => {\n  console.log(t);\n};\nconst rows = [\n  {\n    id: \"a\",\n    name: \"Load Balancer 3\",\n    protocol: \"HTTP\",\n    port: 3000,\n    rule: \"Round robin\",\n    attached_groups: \"Kevin’s VM Groups\",\n    status: \"Disabled\",\n    enabled: true,\n  },\n  {\n    id: \"b\",\n    name: \"Load Balancer 1\",\n    protocol: \"HTTP\",\n    port: 443,\n    rule: \"Round robin\",\n    attached_groups: \"Maureen’s VM Groups\",\n    status: \"Starting\",\n    enabled: true,\n  },\n  {\n    id: \"c\",\n    name: \"Load Balancer 2\",\n    protocol: \"HTTP\",\n    port: 80,\n    rule: \"DNS delegation\",\n    attached_groups: \"Andrew’s VM Groups\",\n    status: \"Active\",\n    enabled: false,\n  },\n];\n\nconst headers = [\n  {\n    key: \"name\",\n    header: \"Name\",\n  },\n  {\n    key: \"protocol\",\n    header: \"Protocol\",\n  },\n  {\n    key: \"port\",\n    header: \"Port\",\n  },\n  {\n    key: \"rule\",\n    header: \"Rule\",\n  },\n  {\n    key: \"attached_groups\",\n    header: \"Attached Groups\",\n  },\n  {\n    key: \"status\",\n    header: \"Status\",\n  },\n  {\n    key: \"enabled\",\n    header: \"Enabled\",\n  },\n];\n\nconst Page = (props) => (\n  <div id=\"page\">\n    <HeaderContainer\n      render={({ isSideNavExpanded, onClickSideNavExpand }) => (\n        <>\n          <Header aria-label=\"IBM Platform Name\">\n            <HeaderName prefix=\"Web\">Watcher</HeaderName>\n\n            <HeaderGlobalBar>\n              <HeaderGlobalAction\n                aria-label=\"Logout\"\n                onClick={props.logoutHandler}\n              >\n                <Logout20 />\n              </HeaderGlobalAction>\n            </HeaderGlobalBar>\n          </Header>\n        </>\n      )}\n    />\n\n    <DataTable rows={rows} headers={headers}>\n      {({\n        rows,\n        headers,\n        getHeaderProps,\n        getRowProps,\n        getTableProps,\n        getToolbarProps,\n        onInputChange,\n        getTableContainerProps,\n      }) => (\n        <TableContainer\n          title=\"Watchers\"\n          description=\"With toolbar\"\n          {...getTableContainerProps()}\n        >\n          <TableToolbar {...getToolbarProps()} aria-label=\"data table toolbar\">\n            <TableToolbarContent>\n              <TableToolbarSearch onChange={onInputChange} />\n              <Button onClick={action(\"Button click\")}>Add Watcher</Button>\n            </TableToolbarContent>\n          </TableToolbar>\n          <Table {...getTableProps()}>\n            <TableHead>\n              <TableRow>\n                {headers.map((header) => (\n                  <TableHeader key={header.key} {...getHeaderProps({ header })}>\n                    {header.header}\n                  </TableHeader>\n                ))}\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {rows.map((row) => (\n                <TableRow key={row.id} {...getRowProps({ row })}>\n                  {row.cells.map((cell) => (\n                    <TableCell key={cell.id}>{cell.value}</TableCell>\n                  ))}\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </TableContainer>\n      )}\n    </DataTable>\n  </div>\n);\n\nexport default Page;\n","import React from \"react\";\nimport { Loading } from \"carbon-components-react\";\nimport { render } from \"react-dom\";\n\nimport Login from \"./components/login\";\nimport Page from \"./components/page\";\n\nconst gatewayAddress =\n  \"https://bwaexdxnvc.execute-api.us-east-2.amazonaws.com/prod\";\nlet silentRefreshTimeout = null;\n\nlet login = async ({ email, password }) => {\n  if (email == null) {\n    email = document.getElementById(\"email\").value;\n  }\n  if (password == null) {\n    password = document.getElementById(\"password\").value;\n  }\n\n  render(<Loading />, document.getElementById(\"root\"));\n\n  let options = {\n    method: \"POST\",\n    credentials: \"include\",\n    body: JSON.stringify({ email, password }),\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    redirect: \"follow\",\n  };\n\n  let response = await fetch(`${gatewayAddress}/login`, options);\n  let responseText = await response.text();\n  let { success, accessTokenExpiry } = JSON.parse(responseText);\n\n  console.log(responseText);\n  if (!success) {\n    alert(\"Bad login\");\n    render(\n      <Login signupHandler={signup} loginHandler={login} />,\n      document.getElementById(\"root\")\n    );\n  } else {\n    await getProfile();\n    silentRefreshTimeout = setTimeout(\n      silentRefresh,\n      (accessTokenExpiry - 2) * 1000\n    );\n  }\n};\n\nlet logout = async () => {\n  var requestOptions = {\n    method: \"POST\",\n    credentials: \"include\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    redirect: \"follow\",\n  };\n\n  let response = await fetch(`${gatewayAddress}/logout`, requestOptions);\n  let responseText = await response.text();\n  render(\n    <Login signupHandler={signup} loginHandler={login} />,\n    document.getElementById(\"root\")\n  );\n\n  // Stop silent refresh\n  clearTimeout(silentRefreshTimeout);\n\n  return JSON.parse(responseText).success;\n};\n\nlet signup = async () => {\n  let email = document.getElementById(\"email\").value;\n  let password = document.getElementById(\"password\").value;\n\n  render(<Loading />, document.getElementById(\"root\"));\n\n  let options = {\n    method: \"POST\",\n    credentials: \"include\",\n    body: JSON.stringify({ email, password }),\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    redirect: \"follow\",\n  };\n\n  let response = await fetch(`${gatewayAddress}/user`, options);\n  let responseText = await response.text();\n  console.log(responseText);\n\n  login({ email, password });\n};\n\nlet getProfile = async () => {\n  var requestOptions = {\n    credentials: \"include\",\n  };\n\n  let response = await fetch(`${gatewayAddress}/user`, requestOptions);\n  let responseText = await response.text();\n  console.log(JSON.parse(responseText));\n  render(<Page logoutHandler={logout} />, document.getElementById(\"root\"));\n};\n\nlet silentRefresh = async () => {\n  let requestOptions = {\n    method: \"POST\",\n    credentials: \"include\",\n  };\n\n  let response = await fetch(`${gatewayAddress}/refresh`, requestOptions);\n  let responseText = await response.text();\n  let { success, accessTokenExpiry } = JSON.parse(responseText);\n\n  // If something is wrong with refresh token.. we logout\n  if (!success) {\n    await logout();\n  } else {\n    // Start silent refresh a couple seconds early... so we always have an access token\n    silentRefreshTimeout = setTimeout(\n      silentRefresh,\n      (accessTokenExpiry - 2) * 1000\n    );\n  }\n\n  return success;\n};\n\nlet initialSilentRefresh = async () => {\n  try {\n    let success = await silentRefresh();\n\n    if (success) {\n      await getProfile();\n    }\n  } catch (err) {\n    console.log(\"Initial silent refresh fail \" + err);\n  }\n};\n\nrender(<Loading />, document.getElementById(\"root\"));\ninitialSilentRefresh();\n"],"sourceRoot":""}