{"version":3,"sources":["components/threetree_90.png","components/login.js","components/page.js","index.js"],"names":["module","exports","__webpack_require__","p","Login","props","react_default","a","createElement","id","Header","aria-label","HeaderName","href","prefix","Grid","Row","Column","sm","span","offset","md","lg","className","TextInput","labelText","onKeyPress","event","key","loginHandler","PasswordInput","Button","size","kind","onClick","signupHandler","src","fractel","alt","headers","header","Page","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","updateWatchers","asyncToGenerator","regenerator_default","mark","_callee","requestOptions","response","responseText","_JSON$parse","watchers","oldState","wrap","_context","prev","next","credentials","fetch","concat","gatewayAddress","sent","text","JSON","parse","forEach","i","date","Date","setUTCSeconds","last_run","String","slice","state","setState","stop","deleteWatcher","_ref2","_callee2","watcherId","_context2","method","Content-Type","body","stringify","redirect","_x","apply","arguments","openModal","addWatcherModalOpen","closeModal","submitModal","_callee3","url","frequency","options","_context3","document","getElementById","value","_this2","HeaderContainer","render","Fragment","HeaderGlobalBar","HeaderGlobalAction","logoutHandler","bucket_10","DataTable","rows","isSortable","_ref4","getHeaderProps","getRowProps","getTableProps","getToolbarProps","onInputChange","getTableContainerProps","TableContainer","assign","title","email","TableToolbar","TableToolbarContent","TableToolbarSearch","onChange","Table","TableHead","TableRow","map","TableHeader","TableBody","row","cells","OverflowMenu","flipped","OverflowMenuItem","itemText","hasDivider","isDelete","cell","TableCell","Modal","hasForm","selectorPrimaryFocus","open","primaryButtonText","secondaryButtonText","shouldSubmitOnEnter","onRequestClose","onRequestSubmit","onSecondarySubmit","placeholder","style","marginBottom","React","Component","silentRefreshTimeout","login","_ref","password","success","accessTokenExpiry","console","log","Loading","setTimeout","silentRefresh","components_page","logout","alert","components_login","signup","_ref3","clearTimeout","abrupt","_ref5","_callee4","_JSON$parse2","_context4","initialSilentRefresh","_ref6","_callee5","_context5","t0"],"mappings":"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","file":"static/js/main.fcdc4c9e.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/threetree_90.8428407b.png\";","import React from \"react\";\nimport {\n  Header,\n  HeaderName,\n  Grid,\n  Row,\n  Column,\n  Button,\n  TextInput,\n} from \"carbon-components-react\";\nimport \"./login.css\";\nimport fractel from \"./threetree_90.png\";\n\nconst Login = (props) => (\n  <div id=\"login\">\n    <Header aria-label=\"header\">\n      <HeaderName href=\"https://github.com/felixjchen/web-watcher\" prefix=\"Web\">\n        Watcher\n      </HeaderName>\n    </Header>\n    <Grid>\n      <Row>\n        <Column\n          id=\"leftBox\"\n          sm={{ span: 4, offset: 0 }}\n          md={{ span: 4, offset: 1 }}\n          lg={{ span: 4, offset: 2 }}\n        >\n          <h1 className=\"bx--type-semibold\">Sign in to your account</h1>\n          <TextInput \n          id=\"email\" \n          labelText=\"Email\" \n          onKeyPress={(event) => {\n            if (event.key === \"Enter\") {\n              props.loginHandler({})\n            }\n          }}\n          />\n          <TextInput.PasswordInput \n          id=\"password\" \n          labelText=\"Password\" \n          onKeyPress={(event) => {\n            if (event.key === \"Enter\") {\n              props.loginHandler({})\n            }\n          }}\n          />\n          <Button size=\"small\" kind=\"secondary\" onClick={props.signupHandler}>\n            Sign up\n          </Button>\n          <Button size=\"small\" onClick={props.loginHandler}>\n            Log in\n          </Button>\n        </Column>\n        <Column\n          id=\"rightBox\"\n          sm={{ span: 0 }}\n          md={{ span: 2 }}\n          lg={{ span: 4 }}\n        >\n          <img src={fractel} alt=\"fractel\"></img>\n        </Column>\n      </Row>\n    </Grid>\n  </div>\n);\n\nexport default Login;\n","import React from \"react\";\nimport {\n  Header,\n  HeaderName,\n  HeaderContainer,\n  HeaderGlobalBar,\n  HeaderGlobalAction,\n  TableContainer,\n  Table,\n  TableHead,\n  TableRow,\n  TableHeader,\n  TableBody,\n  TableCell,\n  TableToolbar,\n  TableToolbarContent,\n  TableToolbarSearch,\n  DataTable,\n  Button,\n  OverflowMenu,\n  OverflowMenuItem,\n  TextInput,\n  Modal,\n} from \"carbon-components-react\";\nimport { Logout20 } from \"@carbon/icons-react\";\nimport \"./page.css\";\n\n\nconst headers = [\n  {\n    key: \"url\",\n    header: \"URL\",\n  },\n  {\n    key: \"frequency\",\n    header: \"Frequency\",\n  },\n  {\n    key: \"last_run\",\n    header: \"Last Run\",\n  },\n  {\n    key: \"options\",\n    header: \"\",\n  },\n];\n\nclass Page extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      addWatcherModalOpen: false,\n      watchers: []\n    };\n\n    this.updateWatchers()\n  }\n\n  updateWatchers = async () => {\n    let requestOptions = {\n      credentials: \"include\",\n    };\n  \n    let response = await fetch(`${this.props.gatewayAddress}/user`, requestOptions);\n    let responseText = await response.text();\n  \n    let { watchers } = JSON.parse(responseText);\n    // Cleanup Date\n    watchers.forEach((i) => {\n      let date = new Date(0);\n      date.setUTCSeconds(i.last_run);\n      i.last_run = String(date).slice(0, 24);\n    });\n\n    let oldState = this.state\n    oldState.watchers = watchers\n    this.setState(oldState);\n  }\n\n  deleteWatcher = async (watcherId) => {\n    let requestOptions = {\n      method: 'DELETE',\n      credentials: \"include\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ watcherId }),\n      redirect: 'follow'\n    };\n\n    await fetch(`${this.props.gatewayAddress}/watcher`, requestOptions)\n    this.updateWatchers()\n  }\n\n  openModal = () => {\n    let oldState = this.state\n    oldState.addWatcherModalOpen = true\n    this.setState(oldState);\n  };\n  closeModal = () => {\n    let oldState = this.state\n    oldState.addWatcherModalOpen = false\n    this.setState(oldState);\n  };\n  submitModal = async () => {\n    let url = document.getElementById(\"modalUrl\").value\n    let frequency = document.getElementById(\"modalFrequency\").value\n\n    let options = {\n      method: \"POST\",\n      credentials: \"include\",\n      body: JSON.stringify({ url, frequency }),\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      redirect: \"follow\",\n    };\n\n    let oldState = this.state\n    oldState.addWatcherModalOpen = false\n    this.setState(oldState);\n\n    await fetch(\"https://bwaexdxnvc.execute-api.us-east-2.amazonaws.com/prod/watcher\", options)\n    this.updateWatchers()\n  }\n\n  render() {\n    return (\n      <div id=\"page\">\n        <HeaderContainer\n          render={() => (\n            <>\n              <Header aria-label=\"IBM Platform Name\">\n                <HeaderName href=\"https://github.com/felixjchen/web-watcher\" prefix=\"Web\">Watcher</HeaderName>\n                <HeaderGlobalBar>\n                  <HeaderGlobalAction\n                    id=\"logoutIcon\"\n                    aria-label=\"Logout\"\n                    onClick={this.props.logoutHandler}\n                  >\n                    <Logout20 />\n                  </HeaderGlobalAction>\n                </HeaderGlobalBar>\n              </Header>\n            </>\n          )}\n        />\n\n        <DataTable rows={this.state.watchers} headers={headers} isSortable>\n          {({\n            rows,\n            headers,\n            getHeaderProps,\n            getRowProps,\n            getTableProps,\n            getToolbarProps,\n            onInputChange,\n            getTableContainerProps,\n          }) => (\n            <TableContainer\n              title={`Welcome ${this.props.email}`}\n              // description={`Welcome ${props.email}`}\n              {...getTableContainerProps()}\n            >\n              <TableToolbar\n                {...getToolbarProps()}\n                aria-label=\"data table toolbar\"\n              >\n                <TableToolbarContent>\n                  <TableToolbarSearch onChange={onInputChange} />\n                  <Button onClick={this.openModal}>Add Watcher</Button>\n                </TableToolbarContent>\n              </TableToolbar>\n              <Table {...getTableProps()}>\n                <TableHead>\n                  <TableRow>\n                    {headers.map((header) => (\n                      \n                      <TableHeader\n                        key={header.key}\n                        {...getHeaderProps({ header, isSortable: (header.key !== \"options\") })}\n                      >\n                        {header.header}\n                      </TableHeader>\n\n                    ))}\n\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {rows.map((row) => {\n                    // Set row 3 to dropdown menu\n                    row.cells[3].value = (\n                      <OverflowMenu flipped={true}>\n                        {/* <OverflowMenuItem itemText=\"Edit\" /> */}\n                        <OverflowMenuItem\n                          itemText=\"Delete\"\n                          hasDivider\n                          isDelete\n                          onClick={() => {\n                            this.deleteWatcher(row.id)\n                          }}\n                        />\n                      </OverflowMenu>\n                    );\n\n                    return (\n                      <TableRow key={row.id} {...getRowProps({ row })}>\n                        {row.cells.map((cell) => (\n                          <TableCell key={cell.id}>{cell.value}</TableCell>\n                        ))}\n                      </TableRow>\n                    );\n                  })}\n                </TableBody>\n              </Table>\n            </TableContainer>\n          )}\n        </DataTable>\n        <Modal\n          hasForm\n          size={\"sm\"}\n          selectorPrimaryFocus=\"#text-input-2\"\n          open={this.state.addWatcherModalOpen}\n          primaryButtonText={\"Add\"}\n          secondaryButtonText={\"Cancel\"}\n          shouldSubmitOnEnter={true}\n          onRequestClose={this.closeModal}\n          onRequestSubmit={this.submitModal}\n          onSecondarySubmit={this.closeModal}\n        >\n          <TextInput\n            id=\"modalUrl\"\n            labelText=\"URL\"\n            placeholder=\"https://www.google.com/\"\n            style={{ marginBottom: \"1rem\" }}\n          />\n          <TextInput\n            id=\"modalFrequency\"\n            labelText=\"Frequency (seconds)\"\n            placeholder=\"60\"\n          />\n        </Modal>\n      </div>\n    );\n  }\n}\n\nexport default Page;\n","import React from \"react\";\nimport { Loading } from \"carbon-components-react\";\nimport { render } from \"react-dom\";\n\nimport Login from \"./components/login\";\nimport Page from \"./components/page\";\n\nconst gatewayAddress =\n  \"https://bwaexdxnvc.execute-api.us-east-2.amazonaws.com/prod\";\nlet silentRefreshTimeout = null;\n\nlet login = async ({ email, password }) => {\n  if (email == null) {\n    email = document.getElementById(\"email\").value;\n  }\n  if (password == null) {\n    password = document.getElementById(\"password\").value;\n  }\n\n  console.log(email, password)\n\n  render(<Loading />, document.getElementById(\"root\"));\n\n  let options = {\n    method: \"POST\",\n    credentials: \"include\",\n    body: JSON.stringify({ email, password }),\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    redirect: \"follow\",\n  };\n\n  let response = await fetch(`${gatewayAddress}/login`, options);\n  let responseText = await response.text();\n  let { success, accessTokenExpiry } = JSON.parse(responseText);\n\n  console.log(responseText);\n  if (!success) {\n    alert(\"Login failed: username/password error\");\n    render(\n      <Login signupHandler={signup} loginHandler={login} />,\n      document.getElementById(\"root\")\n    );\n  } else {\n    silentRefreshTimeout = setTimeout(\n      silentRefresh,\n      (accessTokenExpiry - 2) * 1000\n    );\n    render(\n      <Page email={email} gatewayAddress={gatewayAddress} logoutHandler={logout} />,\n      document.getElementById(\"root\")\n    );\n  }\n};\n\nlet logout = async () => {\n  var requestOptions = {\n    method: \"POST\",\n    credentials: \"include\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    redirect: \"follow\",\n  };\n\n  let response = await fetch(`${gatewayAddress}/logout`, requestOptions);\n  let responseText = await response.text();\n  render(\n    <Login signupHandler={signup} loginHandler={login} />,\n    document.getElementById(\"root\")\n  );\n\n  // Stop silent refresh\n  clearTimeout(silentRefreshTimeout);\n\n  return JSON.parse(responseText).success;\n};\n\nlet signup = async () => {\n  let email = document.getElementById(\"email\").value;\n  let password = document.getElementById(\"password\").value;\n\n  render(<Loading />, document.getElementById(\"root\"));\n\n  let options = {\n    method: \"POST\",\n    credentials: \"include\",\n    body: JSON.stringify({ email, password }),\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    redirect: \"follow\",\n  };\n\n  let response = await fetch(`${gatewayAddress}/user`, options);\n  let responseText = await response.text();\n  console.log(responseText);\n\n  login({ email, password });\n};\n\n\nlet silentRefresh = async () => {\n  let requestOptions = {\n    method: \"POST\",\n    credentials: \"include\",\n  };\n\n  let response = await fetch(`${gatewayAddress}/refresh`, requestOptions);\n  let responseText = await response.text();\n  let { success, accessTokenExpiry, email } = JSON.parse(responseText);\n\n  // If something is wrong with refresh token.. we logout\n  if (!success) {\n    await logout();\n  } else {\n    // Start silent refresh a couple seconds early... so we always have an access token\n    silentRefreshTimeout = setTimeout(\n      silentRefresh,\n      (accessTokenExpiry - 2) * 1000\n    );\n    render(\n      <Page email={email} gatewayAddress={gatewayAddress} logoutHandler={logout} />,\n      document.getElementById(\"root\")\n    );\n  }\n\n  return success;\n};\n\nlet initialSilentRefresh = async () => {\n  try {\n    await silentRefresh();\n  } catch (err) {\n    console.log(\"Initial silent refresh fail \" + err);\n  }\n};\n\nrender(<Loading />, document.getElementById(\"root\"));\ninitialSilentRefresh();\n"],"sourceRoot":""}