(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{35:function(e,t,n){e.exports=n.p+"static/media/threetree_90.8428407b.png"},40:function(e,t,n){e.exports=n(52)},47:function(e,t,n){},50:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var a=n(6),r=n.n(a),c=n(15),l=n(0),s=n.n(l),o=n(72),u=n(11),i=n(58),d=n(70),m=n(59),p=n(60),f=n(61),E=n(69),h=n(71),g=(n(47),n(35)),b=n.n(g),x=function(e){return s.a.createElement("div",{id:"login"},s.a.createElement(i.a,{"aria-label":"header"},s.a.createElement(d.a,{href:"#",prefix:"Web"},"Watcher")),s.a.createElement(m.a,null,s.a.createElement(p.a,null,s.a.createElement(f.a,{id:"leftBox",sm:{span:4,offset:0},md:{span:4,offset:1},lg:{span:4,offset:2}},s.a.createElement("h1",{className:"bx--type-semibold"},"Sign in to your account"),s.a.createElement(E.a,{id:"email",labelText:"Email"}),s.a.createElement(E.a.PasswordInput,{id:"password",labelText:"Password"}),s.a.createElement(h.a,{size:"small",kind:"secondary",onClick:e.signupHandler},"Sign up"),s.a.createElement(h.a,{size:"small",onClick:e.loginHandler},"Log in")),s.a.createElement(f.a,{id:"rightBox",sm:{span:0},md:{span:2},lg:{span:4}},s.a.createElement("img",{src:b.a,alt:"fractel"})))))},w=n(62),y=n(63),v=n(64),k=n(68),O=n(25),T=n(28),j=n(29),I=n(31),S=n(23),B=n(26),P=n(27),C=n(30),H=n(24),N=n(13),J=n(65),W=(n(50),function(){console.log("Add WATCHER")}),L=[{key:"url",header:"URL"},{key:"frequency",header:"Frequency"},{key:"last_run",header:"Last Run"},{key:"options",header:"Options"}],R=function(e){return s.a.createElement("div",{id:"page"},s.a.createElement(w.a,{render:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(i.a,{"aria-label":"IBM Platform Name"},s.a.createElement(d.a,{prefix:"Web"},"Watcher"),s.a.createElement(y.a,null,s.a.createElement(v.a,{"aria-label":"Logout",onClick:e.logoutHandler},s.a.createElement(J.a,null)))))}}),s.a.createElement(k.a,{rows:e.watchers,headers:L},function(e){var t=e.rows,n=e.headers,a=e.getHeaderProps,r=e.getRowProps,c=e.getTableProps,l=e.getToolbarProps,o=e.onInputChange,u=e.getTableContainerProps;return s.a.createElement(O.a,u(),s.a.createElement(T.a,Object.assign({},l(),{"aria-label":"data table toolbar"}),s.a.createElement(j.a,null,s.a.createElement(I.a,{onChange:o}),s.a.createElement(h.a,{onClick:W},"Add Watcher"))),s.a.createElement(S.a,c(),s.a.createElement(B.a,null,s.a.createElement(P.a,null,n.map(function(e){return s.a.createElement(C.a,Object.assign({key:e.key},a({header:e})),e.header)}))),s.a.createElement(H.a,null,t.map(function(e){return e.cells[3].value="DROPDOWN",s.a.createElement(P.a,Object.assign({key:e.id},r({row:e})),e.cells.map(function(e){return s.a.createElement(N.a,{key:e.id},e.value)}))}))))}))},_="https://bwaexdxnvc.execute-api.us-east-2.amazonaws.com/prod",z=null,A=function(){var e=Object(c.a)(r.a.mark(function e(t){var n,a,c,l,i,d,m,p;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,a=t.password,null==n&&(n=document.getElementById("email").value),null==a&&(a=document.getElementById("password").value),Object(u.render)(s.a.createElement(o.a,null),document.getElementById("root")),c={method:"POST",credentials:"include",body:JSON.stringify({email:n,password:a}),headers:{"Content-Type":"application/json"},redirect:"follow"},e.next=7,fetch("".concat(_,"/login"),c);case 7:return l=e.sent,e.next=10,l.text();case 10:if(i=e.sent,d=JSON.parse(i),m=d.success,p=d.accessTokenExpiry,console.log(i),m){e.next=18;break}alert("Login failed: username/password error"),Object(u.render)(s.a.createElement(x,{signupHandler:q,loginHandler:A}),document.getElementById("root")),e.next=21;break;case 18:return e.next=20,F();case 20:z=setTimeout(U,1e3*(p-2));case 21:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(c.a)(r.a.mark(function e(){var t,n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},redirect:"follow"},e.next=3,fetch("".concat(_,"/logout"),t);case 3:return n=e.sent,e.next=6,n.text();case 6:return a=e.sent,Object(u.render)(s.a.createElement(x,{signupHandler:q,loginHandler:A}),document.getElementById("root")),clearTimeout(z),e.abrupt("return",JSON.parse(a).success);case 10:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(c.a)(r.a.mark(function e(){var t,n,a,c,l;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("email").value,n=document.getElementById("password").value,Object(u.render)(s.a.createElement(o.a,null),document.getElementById("root")),a={method:"POST",credentials:"include",body:JSON.stringify({email:t,password:n}),headers:{"Content-Type":"application/json"},redirect:"follow"},e.next=6,fetch("".concat(_,"/user"),a);case 6:return c=e.sent,e.next=9,c.text();case 9:l=e.sent,console.log(l),A({email:t,password:n});case 12:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(c.a)(r.a.mark(function e(){var t,n,a,c,l,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={credentials:"include"},e.next=3,fetch("".concat(_,"/user"),t);case 3:return n=e.sent,e.next=6,n.text();case 6:a=e.sent,c=JSON.parse(a),l=c.email,(o=c.watchers).forEach(function(e){var t=new Date(0);t.setUTCSeconds(e.last_run),e.last_run=String(t)}),Object(u.render)(s.a.createElement(R,{logoutHandler:D,email:l,watchers:o}),document.getElementById("root"));case 10:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(c.a)(r.a.mark(function e(){var t,n,a,c,l,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"POST",credentials:"include"},e.next=3,fetch("".concat(_,"/refresh"),t);case 3:return n=e.sent,e.next=6,n.text();case 6:if(a=e.sent,c=JSON.parse(a),l=c.success,s=c.accessTokenExpiry,l){e.next=13;break}return e.next=11,D();case 11:e.next=15;break;case 13:z=setTimeout(U,1e3*(s-2)),F();case 15:return e.abrupt("return",l);case 16:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(c.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U();case 3:e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("Initial silent refresh fail "+e.t0);case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(){return e.apply(this,arguments)}}();Object(u.render)(s.a.createElement(o.a,null),document.getElementById("root")),M()}},[[40,1,2]]]);
//# sourceMappingURL=main.3cbf25cb.chunk.js.map