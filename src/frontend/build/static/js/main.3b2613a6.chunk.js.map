{"version":3,"sources":["cookieHelpers.js","components/threetree_90.png","components/login.js","components/page.js","index.js"],"names":["module","exports","setCookie","cname","cvalue","exSeconds","d","Date","setTime","getTime","expires","toUTCString","document","cookie","getCookie","name","ca","split","i","length","c","charAt","substring","indexOf","__webpack_require__","p","Login","props","react_default","a","createElement","id","Header","aria-label","HeaderName","href","prefix","Grid","Row","Column","sm","span","offset","md","lg","className","TextInput","labelText","PasswordInput","Button","size","onClick","handler","src","fractel","alt","Page","HeaderContainer","render","_ref","isSideNavExpanded","onClickSideNavExpand","Fragment","HeaderMenuButton","isCollapsible","isActive","HeaderNavigation","HeaderMenuItem","HeaderMenu","menuLinkName","HeaderGlobalBar","SideNav","isRail","expanded","SideNavItems","SideNavMenu","renderIcon","Fade16","title","SideNavMenuItem","aria-current","SideNavLink","gatewayAddress","getProfile","Object","asyncToGenerator","regenerator_default","mark","_callee","requestOptions","response","responseText","wrap","_context","prev","next","credentials","fetch","concat","sent","text","abrupt","JSON","parse","stop","apply","this","arguments","loginButtonClickHandler","_ref2","_callee2","payload","options","_JSON$parse","success","refreshTokenExpiry","refreshToken","profile","_context2","getElementById","value","email","password","method","body","stringify","headers","Content-Type","redirect","accessToken","accessTokenExpiry","console","log","alert","components_page","getAccessToken","_ref3","_callee3","_JSON$parse2","_context3","_x","components_login"],"mappings":"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","file":"static/js/main.3b2613a6.chunk.js","sourcesContent":["function setCookie(cname, cvalue, exSeconds) {\n  var d = new Date();\n  d.setTime(d.getTime() + exSeconds * 1000);\n  var expires = \"expires=\" + d.toUTCString();\n  document.cookie =\n    cname + \"=\" + cvalue + \";\" + expires + \";path=/; Secure; SameSite=None\";\n}\n\nfunction getCookie(cname) {\n  var name = cname + \"=\";\n  var ca = document.cookie.split(\";\");\n  for (var i = 0; i < ca.length; i++) {\n    var c = ca[i];\n    while (c.charAt(0) == \" \") {\n      c = c.substring(1);\n    }\n    if (c.indexOf(name) == 0) {\n      return c.substring(name.length, c.length);\n    }\n  }\n  return \"\";\n}\n\nmodule.exports = {\n  setCookie,\n  getCookie,\n};\n","module.exports = __webpack_public_path__ + \"static/media/threetree_90.8428407b.png\";","import React from \"react\";\nimport {\n  Header,\n  HeaderName,\n  Grid,\n  Row,\n  Column,\n  Button,\n  TextInput,\n} from \"carbon-components-react\";\nimport \"./login.css\";\nimport fractel from \"./threetree_90.png\";\n\nconst Login = (props) => (\n  <div id=\"login\">\n    <Header aria-label=\"header\">\n      <HeaderName href=\"#\" prefix=\"FC\">\n        Watcher\n      </HeaderName>\n    </Header>\n    <Grid>\n      <Row>\n        <Column\n          id=\"leftBox\"\n          sm={{ span: 4, offset: 0 }}\n          md={{ span: 4, offset: 1 }}\n          lg={{ span: 4, offset: 2 }}\n        >\n          <h1 className=\"bx--type-semibold\">Sign in to your account</h1>\n          <TextInput id=\"email\" labelText=\"Email\" />\n          <TextInput.PasswordInput id=\"password\" labelText=\"Password\" />\n          <Button size=\"small\" onClick={props.handler}>\n            Log in\n          </Button>\n        </Column>\n        <Column\n          id=\"rightBox\"\n          sm={{ span: 0 }}\n          md={{ span: 2 }}\n          lg={{ span: 4 }}\n        >\n          <img src={fractel} alt=\"fractel\"></img>\n        </Column>\n      </Row>\n    </Grid>\n  </div>\n);\n\nexport default Login;\n","import React from \"react\";\nimport {\n  Header,\n  HeaderName,\n  HeaderNavigation,\n  HeaderMenu,\n  HeaderMenuItem,\n  HeaderMenuButton,\n  HeaderContainer,\n  HeaderGlobalBar,\n  SideNav,\n  SideNavMenuItem,\n  SideNavItems,\n  SideNavLink,\n  SideNavMenu,\n} from \"carbon-components-react\";\nimport { Fade16 } from \"@carbon/icons-react\";\nimport \"./page.css\";\n\nconst Page = () => (\n  <div id=\"page\">\n    <HeaderContainer\n      render={({ isSideNavExpanded, onClickSideNavExpand }) => (\n        <>\n          <Header aria-label=\"IBM Platform Name\">\n            <HeaderMenuButton\n              aria-label=\"Open menu\"\n              isCollapsible\n              onClick={onClickSideNavExpand}\n              isActive={isSideNavExpanded}\n            />\n            <HeaderName href=\"#\" prefix=\"FC\">\n              Watcher\n            </HeaderName>\n            <HeaderNavigation aria-label=\"FC Watcher\">\n              <HeaderMenuItem href=\"#\">Link 1</HeaderMenuItem>\n              <HeaderMenuItem href=\"#\">Link 2</HeaderMenuItem>\n\n              <HeaderMenu aria-label=\"Link 3\" menuLinkName=\"Link 3\">\n                <HeaderMenuItem href=\"#one\">Sub-link 1</HeaderMenuItem>\n                <HeaderMenuItem href=\"#two\">Sub-link 2</HeaderMenuItem>\n                <HeaderMenuItem href=\"#three\">Sub-link 3</HeaderMenuItem>\n              </HeaderMenu>\n            </HeaderNavigation>\n            <HeaderGlobalBar>Welcome</HeaderGlobalBar>\n            <SideNav\n              aria-label=\"Side navigation\"\n              isRail\n              expanded={isSideNavExpanded}\n            >\n              <SideNavItems>\n                <SideNavMenu renderIcon={Fade16} title=\"Category title\">\n                  <SideNavMenuItem\n                    aria-current=\"page\"\n                    href=\"javascript:void(0)\"\n                  >\n                    Link\n                  </SideNavMenuItem>\n                  <SideNavMenuItem href=\"javascript:void(0)\">\n                    Link\n                  </SideNavMenuItem>\n                  <SideNavMenuItem href=\"javascript:void(0)\">\n                    Link\n                  </SideNavMenuItem>\n                </SideNavMenu>\n                <SideNavLink\n                  aria-current=\"page\"\n                  renderIcon={Fade16}\n                  href=\"javascript:void(0)\"\n                >\n                  Link\n                </SideNavLink>\n                <SideNavLink renderIcon={Fade16} href=\"javascript:void(0)\">\n                  Link\n                </SideNavLink>\n              </SideNavItems>\n            </SideNav>\n          </Header>\n        </>\n      )}\n    />\n  </div>\n);\n\nexport default Page;\n","\"use strict\";\n\nimport React from \"react\";\nimport { render } from \"react-dom\";\n\nimport Login from \"./components/login\";\nimport Page from \"./components/page\";\n\nimport { setCookie, getCookie } from \"./cookieHelpers\";\n\nconst gatewayAddress =\n  \"https://bwaexdxnvc.execute-api.us-east-2.amazonaws.com/prod\";\n\nlet getProfile = async () => {\n  var requestOptions = {\n    credentials: \"include\",\n  };\n\n  let response = await fetch(`${gatewayAddress}/user`, requestOptions);\n  let responseText = await response.text();\n\n  return JSON.parse(responseText);\n};\n\nlet loginButtonClickHandler = async () => {\n  let email = document.getElementById(\"email\").value;\n  let password = document.getElementById(\"password\").value;\n\n  email = \"felixchen1998@gmail.com\";\n  password = \"dude\";\n\n  let payload = { email, password };\n  let options = {\n    method: \"POST\",\n    credentials: \"include\",\n    body: JSON.stringify(payload),\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    redirect: \"follow\",\n  };\n\n  let response = await fetch(`${gatewayAddress}/login`, options);\n  let responseText = await response.text();\n  let {\n    success,\n    accessToken,\n    accessTokenExpiry,\n    refreshTokenExpiry,\n    refreshToken,\n  } = JSON.parse(responseText);\n\n  console.log(responseText);\n  if (!success) {\n    alert(\"Bad Login\");\n  } else {\n    setCookie(\"refreshToken\", refreshToken, refreshTokenExpiry);\n    let profile = await getProfile();\n    console.log(profile);\n    render(<Page />, document.getElementById(\"root\"));\n  }\n};\n\nlet getAccessToken = async (refreshToken) => {\n  let requestOptions = {\n    method: \"POST\",\n    credentials: \"include\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({ refreshToken }),\n    redirect: \"follow\",\n  };\n\n  let response = await fetch(`${gatewayAddress}/refresh`, requestOptions);\n  let responseText = await response.text();\n  let { success } = JSON.parse(responseText);\n\n  console.log(responseText);\n};\n\nlet refreshToken = getCookie(\"refreshToken\");\n\nif (refreshToken) {\n  getAccessToken(\"\");\n}\n\nrender(\n  <Login handler={loginButtonClickHandler} />,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}