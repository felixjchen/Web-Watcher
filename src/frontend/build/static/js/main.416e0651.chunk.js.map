{"version":3,"sources":["components/threetree_90.png","components/login.js","components/page.js","index.js"],"names":["module","exports","__webpack_require__","p","Login","props","react_default","a","createElement","id","Header","aria-label","HeaderName","prefix","Grid","Row","Column","sm","span","offset","md","lg","className","TextInput","labelText","onKeyPress","event","key","loginHandler","PasswordInput","Button","size","kind","onClick","signupHandler","src","fractel","alt","toSeconds","everyHour","every6Hours","every12Hours","every24Hours","fromSeconds","3600","21600","43200","86400","headers","header","Page","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","updateWatchers","asyncToGenerator","regenerator_default","mark","_callee","requestOptions","response","responseText","_JSON$parse","watchers","oldState","wrap","_context","prev","next","credentials","fetch","concat","gatewayAddress","sent","text","JSON","parse","forEach","i","date","Date","setUTCSeconds","last_run","String","slice","state","setState","stop","deleteWatcher","_ref2","_callee2","watcherId","_context2","method","Content-Type","body","stringify","redirect","_x","apply","arguments","openModal","addWatcherModalOpen","closeModal","submitModal","_callee3","url","frequency","options","_context3","document","getElementById","value","window","RadioButtonGroup","selected","_this2","vh","innerHeight","documentElement","style","setProperty","HeaderContainer","render","Fragment","HeaderGlobalBar","HeaderGlobalAction","logoutHandler","bucket_10","DataTable","rows","isSortable","_ref4","getHeaderProps","getRowProps","getTableProps","getToolbarProps","onInputChange","getTableContainerProps","TableContainer","assign","title","email","TableToolbar","TableToolbarContent","TableToolbarSearch","onChange","Table","TableHead","TableRow","map","TableHeader","TableBody","row","TableCell","cells","display","Link","href","OverflowMenu","flipped","OverflowMenuItem","itemText","hasDivider","isDelete","Modal","hasForm","selectorPrimaryFocus","open","primaryButtonText","secondaryButtonText","shouldSubmitOnEnter","onRequestClose","onRequestSubmit","onSecondarySubmit","placeholder","marginBottom","FormGroup","legendText","defaultSelected","name","ref","RadioButton","React","Component","silentRefreshTimeout","login","_ref","password","success","accessTokenExpiry","console","log","Loading","setTimeout","silentRefresh","components_page","logout","alert","components_login","signup","_ref3","clearTimeout","abrupt","test","_ref5","_callee4","_JSON$parse2","_context4","initialSilentRefresh","_ref6","_callee5","_context5","t0"],"mappings":"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","file":"static/js/main.416e0651.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/threetree_90.8428407b.png\";","import React from \"react\";\nimport {\n  Header,\n  HeaderName,\n  Grid,\n  Row,\n  Column,\n  Button,\n  TextInput,\n} from \"carbon-components-react\";\nimport \"./login.css\";\nimport fractel from \"./threetree_90.png\";\n\nconst Login = (props) => (\n  <div id=\"login\">\n    <Header aria-label=\"header\">\n      <HeaderName prefix=\"Web\">Watcher</HeaderName>\n    </Header>\n    <Grid>\n      <Row>\n        <Column\n          id=\"leftBox\"\n          sm={{ span: 4, offset: 0 }}\n          md={{ span: 4, offset: 1 }}\n          lg={{ span: 4, offset: 2 }}\n        >\n          <h1 className=\"bx--type-semibold\">Sign in to your account</h1>\n          <TextInput\n            id=\"email\"\n            labelText=\"Email\"\n            onKeyPress={(event) => {\n              if (event.key === \"Enter\") {\n                props.loginHandler({});\n              }\n            }}\n          />\n          <TextInput.PasswordInput\n            id=\"password\"\n            labelText=\"Password\"\n            onKeyPress={(event) => {\n              if (event.key === \"Enter\") {\n                props.loginHandler({});\n              }\n            }}\n          />\n          <Button size=\"small\" kind=\"secondary\" onClick={props.signupHandler}>\n            Sign up\n          </Button>\n          <Button size=\"small\" onClick={props.loginHandler}>\n            Log in\n          </Button>\n        </Column>\n        <Column\n          id=\"rightBox\"\n          sm={{ span: 0 }}\n          md={{ span: 2 }}\n          lg={{ span: 4 }}\n        >\n          <img src={fractel} alt=\"fractel\"></img>\n        </Column>\n      </Row>\n    </Grid>\n  </div>\n);\n\nexport default Login;\n","import React from \"react\";\nimport {\n  Header,\n  HeaderName,\n  HeaderContainer,\n  HeaderGlobalBar,\n  HeaderGlobalAction,\n  TableContainer,\n  Table,\n  TableHead,\n  TableRow,\n  TableHeader,\n  TableBody,\n  TableCell,\n  TableToolbar,\n  TableToolbarContent,\n  TableToolbarSearch,\n  DataTable,\n  Button,\n  OverflowMenu,\n  OverflowMenuItem,\n  TextInput,\n  Modal,\n  Link,\n  RadioButton,\n  RadioButtonGroup,\n  FormGroup,\n} from \"carbon-components-react\";\nimport { Logout20 } from \"@carbon/icons-react\";\nimport \"./page.css\";\n\nconst toSeconds = {\n  everyHour: 3600,\n  every6Hours: 21600,\n  every12Hours: 43200,\n  every24Hours: 86400,\n};\n\nconst fromSeconds = {\n  3600: \"every hour\",\n  21600: \"every 6 hours\",\n  43200: \"every 12 hours\",\n  86400: \"every 24 hours\",\n};\nconst headers = [\n  {\n    key: \"url\",\n    header: \"URL\",\n  },\n  {\n    key: \"frequency\",\n    header: \"Frequency\",\n  },\n  {\n    key: \"last_run\",\n    header: \"Last Run\",\n  },\n  {\n    key: \"options\",\n    header: \"\",\n  },\n];\n\nclass Page extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      addWatcherModalOpen: false,\n      watchers: [],\n    };\n\n    this.updateWatchers();\n  }\n\n  updateWatchers = async () => {\n    let requestOptions = {\n      credentials: \"include\",\n    };\n\n    let response = await fetch(\n      `${this.props.gatewayAddress}/user`,\n      requestOptions\n    );\n    let responseText = await response.text();\n\n    let { watchers } = JSON.parse(responseText);\n    // Cleanup Date\n    watchers.forEach((i) => {\n      let date = new Date(0);\n      date.setUTCSeconds(i.last_run);\n      i.last_run = String(date).slice(0, 24);\n    });\n\n    let oldState = this.state;\n    oldState.watchers = watchers;\n    this.setState(oldState);\n  };\n\n  deleteWatcher = async (watcherId) => {\n    let requestOptions = {\n      method: \"DELETE\",\n      credentials: \"include\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ watcherId }),\n      redirect: \"follow\",\n    };\n\n    await fetch(`${this.props.gatewayAddress}/watcher`, requestOptions);\n    this.updateWatchers();\n  };\n\n  openModal = () => {\n    let oldState = this.state;\n    oldState.addWatcherModalOpen = true;\n    this.setState(oldState);\n  };\n  closeModal = () => {\n    let oldState = this.state;\n    oldState.addWatcherModalOpen = false;\n    this.setState(oldState);\n  };\n  submitModal = async () => {\n    let url = document.getElementById(\"modalUrl\").value;\n\n    let frequency = toSeconds[window.RadioButtonGroup.state.selected];\n    let options = {\n      method: \"POST\",\n      credentials: \"include\",\n      body: JSON.stringify({ url, frequency }),\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      redirect: \"follow\",\n    };\n\n    let oldState = this.state;\n    oldState.addWatcherModalOpen = false;\n    this.setState(oldState);\n\n    await fetch(\n      \"https://bwaexdxnvc.execute-api.us-east-2.amazonaws.com/prod/watcher\",\n      options\n    );\n    this.updateWatchers();\n  };\n\n  render() {\n    // https://css-tricks.com/the-trick-to-viewport-units-on-mobile/\n    const vh = window.innerHeight * 0.01;\n    document.documentElement.style.setProperty(\"--vh\", `${vh}px`);\n\n    return (\n      <div id=\"page\">\n        <HeaderContainer\n          render={() => (\n            <>\n              <Header aria-label=\"IBM Platform Name\">\n                <HeaderName\n                  // href=\"https://github.com/felixjchen/web-watcher\"\n                  prefix=\"Web\"\n                >\n                  Watcher\n                </HeaderName>\n                <HeaderGlobalBar>\n                  <HeaderGlobalAction\n                    id=\"logoutIcon\"\n                    aria-label=\"Logout\"\n                    onClick={this.props.logoutHandler}\n                  >\n                    <Logout20 />\n                  </HeaderGlobalAction>\n                </HeaderGlobalBar>\n              </Header>\n            </>\n          )}\n        />\n\n        <DataTable rows={this.state.watchers} headers={headers} isSortable>\n          {({\n            rows,\n            headers,\n            getHeaderProps,\n            getRowProps,\n            getTableProps,\n            getToolbarProps,\n            onInputChange,\n            getTableContainerProps,\n          }) => (\n            <TableContainer\n              title={`Welcome ${this.props.email}`}\n              // description={`Welcome ${props.email}`}\n              {...getTableContainerProps()}\n            >\n              <TableToolbar\n                {...getToolbarProps()}\n                aria-label=\"data table toolbar\"\n              >\n                <TableToolbarContent>\n                  <TableToolbarSearch onChange={onInputChange} />\n                  <Button onClick={this.openModal}>Add Watcher</Button>\n                </TableToolbarContent>\n              </TableToolbar>\n              <Table {...getTableProps()}>\n                <TableHead>\n                  <TableRow>\n                    {headers.map((header) => (\n                      <TableHeader\n                        key={header.key}\n                        {...getHeaderProps({\n                          header,\n                          isSortable: header.key !== \"options\",\n                        })}\n                      >\n                        {header.header}\n                      </TableHeader>\n                    ))}\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {rows.map((row) => {\n                    return (\n                      <TableRow key={row.id} {...getRowProps({ row })}>\n                        <TableCell key={row.cells[0].id}>\n                          <p style={{ display: \"none\" }}>\n                            {row.cells[0].value}\n                          </p>\n                          <Link href={row.cells[0].value}>\n                            {row.cells[0].value}\n                          </Link>\n                        </TableCell>\n                        <TableCell key={row.cells[1].id}>\n                          {row.cells[1].value in fromSeconds\n                            ? fromSeconds[row.cells[1].value]\n                            : row.cells[1].value}\n                        </TableCell>\n                        <TableCell key={row.cells[2].id}>\n                          {row.cells[2].value}\n                        </TableCell>\n                        <TableCell key={row.cells[3].id}>\n                          {row.cells[3].value}\n                          <OverflowMenu flipped={true}>\n                            {/* <OverflowMenuItem itemText=\"Edit\" /> */}\n                            <OverflowMenuItem\n                              itemText=\"Delete\"\n                              hasDivider\n                              isDelete\n                              onClick={() => {\n                                this.deleteWatcher(row.id);\n                              }}\n                            />\n                          </OverflowMenu>\n                        </TableCell>\n                      </TableRow>\n                    );\n                  })}\n                </TableBody>\n              </Table>\n            </TableContainer>\n          )}\n        </DataTable>\n        <Modal\n          hasForm\n          size={\"sm\"}\n          selectorPrimaryFocus=\"#text-input-2\"\n          open={this.state.addWatcherModalOpen}\n          primaryButtonText={\"Add\"}\n          secondaryButtonText={\"Cancel\"}\n          shouldSubmitOnEnter={true}\n          onRequestClose={this.closeModal}\n          onRequestSubmit={this.submitModal}\n          onSecondarySubmit={this.closeModal}\n        >\n          <TextInput\n            id=\"modalUrl\"\n            labelText=\"URL\"\n            placeholder=\"https://www.google.com/\"\n            style={{ marginBottom: \"1rem\" }}\n          />\n          <FormGroup legendText=\"Frequency\">\n            <RadioButtonGroup\n              defaultSelected=\"everyHour\"\n              name=\"frequency\"\n              ref={(RadioButtonGroup) => {\n                window.RadioButtonGroup = RadioButtonGroup;\n              }}\n            >\n              <RadioButton\n                labelText=\"every hour\"\n                value=\"everyHour\"\n                id=\"radio-1\"\n              />\n              <RadioButton\n                labelText=\"every 6 hours\"\n                value=\"every6Hours\"\n                id=\"radio-2\"\n              />\n              <RadioButton\n                labelText=\"every 12 hours\"\n                value=\"every12Hours\"\n                id=\"radio-3\"\n              />\n              <RadioButton\n                labelText=\"every 24 hours\"\n                value=\"every24Hours\"\n                id=\"radio-4\"\n              />\n            </RadioButtonGroup>\n          </FormGroup>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nexport default Page;\n","import React from \"react\";\nimport { Loading } from \"carbon-components-react\";\nimport { render } from \"react-dom\";\n\nimport Login from \"./components/login\";\nimport Page from \"./components/page\";\n\nconst gatewayAddress =\n  \"https://bwaexdxnvc.execute-api.us-east-2.amazonaws.com/prod\";\nlet silentRefreshTimeout = null;\n\nlet login = async ({ email, password }) => {\n  if (email == null) {\n    email = document.getElementById(\"email\").value;\n  }\n  if (password == null) {\n    password = document.getElementById(\"password\").value;\n  }\n\n  console.log(email, password);\n\n  render(<Loading />, document.getElementById(\"root\"));\n\n  let options = {\n    method: \"POST\",\n    credentials: \"include\",\n    body: JSON.stringify({ email, password }),\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    redirect: \"follow\",\n  };\n\n  let response = await fetch(`${gatewayAddress}/login`, options);\n  let responseText = await response.text();\n  let { success, accessTokenExpiry } = JSON.parse(responseText);\n\n  console.log(responseText);\n  if (!success) {\n    alert(\"Login failed: username/password error\");\n    render(\n      <Login signupHandler={signup} loginHandler={login} />,\n      document.getElementById(\"root\")\n    );\n  } else {\n    silentRefreshTimeout = setTimeout(\n      silentRefresh,\n      (accessTokenExpiry - 2) * 1000\n    );\n    render(\n      <Page\n        email={email}\n        gatewayAddress={gatewayAddress}\n        logoutHandler={logout}\n      />,\n      document.getElementById(\"root\")\n    );\n  }\n};\n\nlet logout = async () => {\n  var requestOptions = {\n    method: \"POST\",\n    credentials: \"include\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    redirect: \"follow\",\n  };\n\n  let response = await fetch(`${gatewayAddress}/logout`, requestOptions);\n  let responseText = await response.text();\n  render(\n    <Login signupHandler={signup} loginHandler={login} />,\n    document.getElementById(\"root\")\n  );\n\n  // Stop silent refresh\n  clearTimeout(silentRefreshTimeout);\n\n  return JSON.parse(responseText).success;\n};\n\nlet signup = async () => {\n  let email = document.getElementById(\"email\").value;\n  let password = document.getElementById(\"password\").value;\n\n  render(<Loading />, document.getElementById(\"root\"));\n\n  if (\n    !/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/.test(\n      email\n    )\n  ) {\n    alert(\"You have entered an invalid email address!\");\n    return true;\n  }\n\n  let options = {\n    method: \"POST\",\n    credentials: \"include\",\n    body: JSON.stringify({ email, password }),\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    redirect: \"follow\",\n  };\n\n  let response = await fetch(`${gatewayAddress}/user`, options);\n  let responseText = await response.text();\n  console.log(responseText);\n\n  login({ email, password });\n};\n\nlet silentRefresh = async () => {\n  let requestOptions = {\n    method: \"POST\",\n    credentials: \"include\",\n  };\n\n  let response = await fetch(`${gatewayAddress}/refresh`, requestOptions);\n  let responseText = await response.text();\n  let { success, accessTokenExpiry, email } = JSON.parse(responseText);\n  // If something is wrong with refresh token.. we logout\n  if (!success) {\n    await logout();\n  } else {\n    // Start silent refresh a couple seconds early... so we always have an access token\n    silentRefreshTimeout = setTimeout(\n      silentRefresh,\n      (accessTokenExpiry - 2) * 1000\n    );\n    render(\n      <Page\n        email={email}\n        gatewayAddress={gatewayAddress}\n        logoutHandler={logout}\n      />,\n      document.getElementById(\"root\")\n    );\n  }\n\n  return success;\n};\n\nlet initialSilentRefresh = async () => {\n  try {\n    await silentRefresh();\n  } catch (err) {\n    console.log(\"Initial silent refresh fail \" + err);\n  }\n};\n\nrender(<Loading />, document.getElementById(\"root\"));\ninitialSilentRefresh();\n"],"sourceRoot":""}