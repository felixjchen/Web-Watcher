{"version":3,"sources":["components/threetree_90.png","components/login.js","components/page.js","index.js"],"names":["module","exports","__webpack_require__","p","Login","props","react_default","a","createElement","id","Header","aria-label","HeaderName","href","prefix","Grid","Row","Column","sm","span","offset","md","lg","className","TextInput","labelText","PasswordInput","Button","size","onClick","handler","src","fractel","alt","Page","HeaderContainer","render","_ref","isSideNavExpanded","onClickSideNavExpand","Fragment","HeaderMenuButton","isCollapsible","isActive","HeaderNavigation","HeaderMenuItem","HeaderMenu","menuLinkName","HeaderGlobalBar","HeaderGlobalAction","alert","bucket_10","SideNav","isRail","expanded","SideNavItems","SideNavLink","aria-current","renderIcon","Fade16","SideNavMenu","title","SideNavMenuItem","gatewayAddress","login","Object","asyncToGenerator","regenerator_default","mark","_callee","payload","options","response","responseText","_JSON$parse","success","profile","wrap","_context","prev","next","document","getElementById","value","email","password","method","credentials","body","JSON","stringify","headers","Content-Type","redirect","fetch","concat","sent","text","parse","accessTokenExpiry","console","log","getProfile","components_page","stop","apply","this","arguments","logout","_ref2","_callee2","requestOptions","_context2","components_login","abrupt","_ref3","_callee3","_context3","getAccessToken","_ref4","_callee4","_JSON$parse2","_context4","_ref5","_callee5","_context5","t0","initialSilentRefresh"],"mappings":"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","file":"static/js/main.9dfbbd4b.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/threetree_90.8428407b.png\";","import React from \"react\";\nimport {\n  Header,\n  HeaderName,\n  Grid,\n  Row,\n  Column,\n  Button,\n  TextInput,\n} from \"carbon-components-react\";\nimport \"./login.css\";\nimport fractel from \"./threetree_90.png\";\n\nconst Login = (props) => (\n  <div id=\"login\">\n    <Header aria-label=\"header\">\n      <HeaderName href=\"#\" prefix=\"Web\">\n        Watcher\n      </HeaderName>\n    </Header>\n    <Grid>\n      <Row>\n        <Column\n          id=\"leftBox\"\n          sm={{ span: 4, offset: 0 }}\n          md={{ span: 4, offset: 1 }}\n          lg={{ span: 4, offset: 2 }}\n        >\n          <h1 className=\"bx--type-semibold\">Sign in to your account</h1>\n          <TextInput id=\"email\" labelText=\"Email\" />\n          <TextInput.PasswordInput id=\"password\" labelText=\"Password\" />\n          <Button size=\"small\" onClick={props.handler}>\n            Log in\n          </Button>\n        </Column>\n        <Column\n          id=\"rightBox\"\n          sm={{ span: 0 }}\n          md={{ span: 2 }}\n          lg={{ span: 4 }}\n        >\n          <img src={fractel} alt=\"fractel\"></img>\n        </Column>\n      </Row>\n    </Grid>\n  </div>\n);\n\nexport default Login;\n","import React from \"react\";\nimport {\n  Header,\n  HeaderName,\n  HeaderNavigation,\n  HeaderMenu,\n  HeaderMenuItem,\n  HeaderMenuButton,\n  HeaderContainer,\n  HeaderGlobalBar,\n  SideNav,\n  SideNavMenuItem,\n  SideNavItems,\n  SideNavLink,\n  SideNavMenu,\n  HeaderGlobalAction,\n} from \"carbon-components-react\";\nimport { Fade16, Logout20 } from \"@carbon/icons-react\";\nimport \"./page.css\";\n\nconst Page = () => (\n  <div id=\"page\">\n    <HeaderContainer\n      render={({ isSideNavExpanded, onClickSideNavExpand }) => (\n        <>\n          <Header aria-label=\"IBM Platform Name\">\n            <HeaderMenuButton\n              aria-label=\"Open menu\"\n              isCollapsible\n              onClick={onClickSideNavExpand}\n              isActive={isSideNavExpanded}\n            />\n            <HeaderName href=\"#\" prefix=\"Web\">\n              Watcher\n            </HeaderName>\n            <HeaderNavigation aria-label=\"FC Watcher\">\n              <HeaderMenuItem href=\"#\">Link 1</HeaderMenuItem>\n              <HeaderMenuItem href=\"#\">Link 2</HeaderMenuItem>\n\n              <HeaderMenu aria-label=\"Link 3\" menuLinkName=\"Link 3\">\n                <HeaderMenuItem href=\"#one\">Sub-link 1</HeaderMenuItem>\n                <HeaderMenuItem href=\"#two\">Sub-link 2</HeaderMenuItem>\n                <HeaderMenuItem href=\"#three\">Sub-link 3</HeaderMenuItem>\n              </HeaderMenu>\n            </HeaderNavigation>\n\n            <HeaderGlobalBar>\n              <HeaderGlobalAction aria-label=\"Logout\" onClick={alert(\"logout\")}>\n                <Logout20 />\n              </HeaderGlobalAction>\n            </HeaderGlobalBar>\n\n            <SideNav\n              aria-label=\"Side navigation\"\n              isRail\n              expanded={isSideNavExpanded}\n            >\n              <SideNavItems>\n                <SideNavLink\n                  aria-current=\"page\"\n                  renderIcon={Fade16}\n                  href=\"javascript:void(0)\"\n                >\n                  Link\n                </SideNavLink>\n                <SideNavLink renderIcon={Fade16} href=\"javascript:void(0)\">\n                  Link\n                </SideNavLink>\n                <SideNavMenu renderIcon={Fade16} title=\"Category title\">\n                  <SideNavMenuItem\n                    aria-current=\"page\"\n                    href=\"javascript:void(0)\"\n                  >\n                    Link\n                  </SideNavMenuItem>\n                  <SideNavMenuItem href=\"javascript:void(0)\">\n                    Link\n                  </SideNavMenuItem>\n                  <SideNavMenuItem href=\"javascript:void(0)\">\n                    Link\n                  </SideNavMenuItem>\n                </SideNavMenu>\n              </SideNavItems>\n            </SideNav>\n          </Header>\n        </>\n      )}\n    />\n  </div>\n);\n\nexport default Page;\n","\"use strict\";\n\nimport React from \"react\";\nimport { render } from \"react-dom\";\n\nimport Login from \"./components/login\";\nimport Page from \"./components/page\";\n\nconst gatewayAddress =\n  \"https://bwaexdxnvc.execute-api.us-east-2.amazonaws.com/prod\";\n\nlet login = async () => {\n  let email = document.getElementById(\"email\").value;\n  let password = document.getElementById(\"password\").value;\n\n  email = \"felixchen1998@gmail.com\";\n  password = \"dude\";\n\n  let payload = { email, password };\n  let options = {\n    method: \"POST\",\n    credentials: \"include\",\n    body: JSON.stringify(payload),\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    redirect: \"follow\",\n  };\n\n  let response = await fetch(`${gatewayAddress}/login`, options);\n  let responseText = await response.text();\n  let { success, accessTokenExpiry } = JSON.parse(responseText);\n\n  console.log(responseText);\n  if (!success) {\n    alert(\"Bad Login\");\n  } else {\n    let profile = await getProfile();\n    console.log(profile);\n    render(<Page />, document.getElementById(\"root\"));\n  }\n};\n\nlet logout = async () => {\n  var requestOptions = {\n    method: \"POST\",\n    credentials: \"include\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    redirect: \"follow\",\n  };\n\n  let response = await fetch(`${gatewayAddress}/logout`, requestOptions);\n  let responseText = await response.text();\n  render(<Login handler={login} />, document.getElementById(\"root\"));\n  return JSON.parse(responseText).success;\n};\n\nlet getProfile = async () => {\n  var requestOptions = {\n    credentials: \"include\",\n  };\n\n  let response = await fetch(`${gatewayAddress}/user`, requestOptions);\n  let responseText = await response.text();\n\n  return JSON.parse(responseText);\n};\n\nlet getAccessToken = async () => {\n  let requestOptions = {\n    method: \"POST\",\n    credentials: \"include\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    redirect: \"follow\",\n  };\n\n  let response = await fetch(`${gatewayAddress}/refresh`, requestOptions);\n  let responseText = await response.text();\n  let { success } = JSON.parse(responseText);\n\n  // If something is wrong with refresh token.. we logout\n  if (!success) {\n    await logout();\n  }\n\n  return success;\n};\n\nlet initialSilentRefresh = async () => {\n  try {\n    let success = await getAccessToken();\n\n    if (success) {\n      let profile = await getProfile();\n      console.log(profile);\n      render(<Page />, document.getElementById(\"root\"));\n    }\n  } catch (err) {\n    console.log(\"Initial silent refresh fail \" + err);\n  }\n};\n\ninitialSilentRefresh();\n"],"sourceRoot":""}